// Generated by CoffeeScript 2.5.1
import {
  getMove,
  global
} from '../js/globals.js';

import {
  range
} from '../js/utils.js';

export var Button = class Button {
  constructor(x1, y1, text1, onclick) {
    this.star = this.star.bind(this);
    this.draw = this.draw.bind(this);
    this.drawBar = this.drawBar.bind(this);
    this.inside = this.inside.bind(this);
    this.x = x1;
    this.y = y1;
    this.text = text1;
    this.onclick = onclick;
    this.w = 1.5 * global.SIZE;
    this.h = 0.7 * global.SIZE;
    this.bg = 'lightgray';
    this.fg = 'black';
    this.align = CENTER;
    this.drawStar = false;
    this.bar = null;
  }

  star(c1, c2, x, y, r2, n) {
    var a, i, j, len, r, r1, ref, sx, sy;
    r1 = 0.385 * r2;
    fill(c2);
    ellipse(x, y, 2 * r2);
    fill(c1);
    angleMode(DEGREES);
    a = 180 / n;
    beginShape();
    ref = range(2 * n);
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      if (i % 2 === 0) {
        r = r1;
      } else {
        r = r2;
      }
      sx = x + r * cos(i * a + 90);
      sy = y + r * sin(i * a + 90);
      vertex(sx, sy);
    }
    return endShape(CLOSE);
  }

  draw() {
    var move, txt, x;
    move = getMove(global.index - 1);
    if (global.superIndex === 0) {
      txt = move.san;
    } else {
      txt = move.superiorsSan[global.superIndex - 1];
    }
    noStroke();
    fill(this.bg);
    rect(this.x, this.y, this.w, this.h * 0.65);
    if (this.align === LEFT) {
      x = this.x - 0.45 * this.w;
    } else {
      x = this.x;
    }
    if (this.text === txt) {
      fill('red');
    } else {
      fill(this.fg);
    }
    push();
    textSize(0.4 * global.SIZE);
    textAlign(this.align);
    noStroke();
    text(this.text, x, this.y + 0.05 * global.SIZE);
    pop();
    if (this.drawStar) {
      this.star("white", "green", this.x + 0.5 * global.SIZE, this.y, 0.15 * global.SIZE, 5);
    }
    if (this.bar !== null) {
      return this.drawBar();
    }
  }

  drawBar() {
    push();
    rectMode(CORNER);
    noStroke();
    fill('black');
    rect(this.x - this.w / 2, this.y + 0.35 * this.h, this.w, 0.1 * this.h);
    fill('white');
    rect(this.x - this.w / 2, this.y + 0.35 * this.h, this.w * this.bar, 0.1 * this.h);
    return pop();
  }

  inside(x, y) {
    return (this.x - this.w / 2 < x && x < this.x + this.w / 2) && (this.y - this.h / 2 < y && y < this.y + this.h / 2);
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGJ1dHRvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQUE7RUFBUSxPQUFSO0VBQWdCLE1BQWhCO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsS0FBUjtDQUFBLE1BQUE7O0FBRUEsT0FBQSxJQUFhLFNBQU4sTUFBQSxPQUFBO0VBQ04sV0FBYSxHQUFBLElBQUEsT0FBQSxTQUFBLENBQUE7UUFTYixDQUFBLFdBQUEsQ0FBQTtRQWVBLENBQUEsV0FBQSxDQUFBO1FBcUJBLENBQUEsY0FBQSxDQUFBO1FBVUEsQ0FBQSxhQUFBLENBQUE7SUF2RGMsSUFBQyxDQUFBO0lBQUUsSUFBQyxDQUFBO0lBQUUsSUFBQyxDQUFBO0lBQUssSUFBQyxDQUFBO0lBQzFCLElBQUMsQ0FBQSxDQUFELEdBQUssR0FBQSxHQUFNLE1BQU0sQ0FBQztJQUNsQixJQUFDLENBQUEsQ0FBRCxHQUFLLEdBQUEsR0FBTSxNQUFNLENBQUM7SUFDbEIsSUFBQyxDQUFBLEVBQUQsR0FBTTtJQUNOLElBQUMsQ0FBQSxFQUFELEdBQU07SUFDTixJQUFDLENBQUEsS0FBRCxHQUFTO0lBQ1QsSUFBQyxDQUFBLFFBQUQsR0FBWTtJQUNaLElBQUMsQ0FBQSxHQUFELEdBQU87RUFQSzs7RUFTYixJQUFPLENBQUMsRUFBRCxFQUFLLEVBQUwsRUFBUyxDQUFULEVBQVksQ0FBWixFQUFlLEVBQWYsRUFBbUIsQ0FBbkIsQ0FBQTtBQUNSLFFBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQTtJQUFFLEVBQUEsR0FBSyxLQUFBLEdBQU07SUFDWCxJQUFBLENBQUssRUFBTDtJQUNBLE9BQUEsQ0FBUSxDQUFSLEVBQVUsQ0FBVixFQUFZLENBQUEsR0FBRSxFQUFkO0lBQ0EsSUFBQSxDQUFLLEVBQUw7SUFD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LENBQUEsQ0FBRCxHQUFHLENBQVgsRUFBYSxJQUFDLENBQUEsQ0FBRCxHQUFHLElBQUEsR0FBSyxJQUFDLENBQUEsQ0FBdEIsRUFBd0IsSUFBQyxDQUFBLENBQUQsR0FBRyxJQUFDLENBQUEsR0FBNUIsRUFBZ0MsR0FBQSxHQUFJLElBQUMsQ0FBQSxDQUFyQztXQUNBLEdBQUEsQ0FBQTtFQVJTOztFQVVWLE1BQVMsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFBO1dBQVMsQ0FBQSxJQUFDLENBQUEsQ0FBRCxHQUFHLElBQUMsQ0FBQSxDQUFELEdBQUcsQ0FBTixHQUFVLENBQVYsSUFBVSxDQUFWLEdBQWMsSUFBQyxDQUFBLENBQUQsR0FBRyxJQUFDLENBQUEsQ0FBRCxHQUFHLENBQXBCLENBQUEsSUFBMEIsQ0FBQSxJQUFDLENBQUEsQ0FBRCxHQUFHLElBQUMsQ0FBQSxDQUFELEdBQUcsQ0FBTixHQUFVLENBQVYsSUFBVSxDQUFWLEdBQWMsSUFBQyxDQUFBLENBQUQsR0FBRyxJQUFDLENBQUEsQ0FBRCxHQUFHLENBQXBCO0VBQW5DOztBQXhESCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2V0TW92ZSxnbG9iYWx9IGZyb20gJy4uL2pzL2dsb2JhbHMuanMnXHJcbmltcG9ydCB7cmFuZ2V9IGZyb20gJy4uL2pzL3V0aWxzLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIEJ1dHRvblxyXG5cdGNvbnN0cnVjdG9yOiAoQHgsQHksQHRleHQsQG9uY2xpY2spIC0+XHJcblx0XHRAdyA9IDEuNSAqIGdsb2JhbC5TSVpFXHJcblx0XHRAaCA9IDAuNyAqIGdsb2JhbC5TSVpFXHJcblx0XHRAYmcgPSAnbGlnaHRncmF5J1xyXG5cdFx0QGZnID0gJ2JsYWNrJ1xyXG5cdFx0QGFsaWduID0gQ0VOVEVSXHJcblx0XHRAZHJhd1N0YXIgPSBmYWxzZVxyXG5cdFx0QGJhciA9IG51bGxcclxuXHJcblx0c3RhciA6IChjMSwgYzIsIHgsIHksIHIyLCBuKSA9PlxyXG5cdFx0cjEgPSAwLjM4NSpyMlxyXG5cdFx0ZmlsbCBjMlxyXG5cdFx0ZWxsaXBzZSB4LHksMipyMlxyXG5cdFx0ZmlsbCBjMVxyXG5cdFx0YW5nbGVNb2RlIERFR1JFRVNcclxuXHRcdGEgPSAxODAgLyBuXHJcblx0XHRiZWdpblNoYXBlKClcclxuXHRcdGZvciBpIGluIHJhbmdlIDIqblxyXG5cdFx0XHRpZiBpJTI9PTAgdGhlbiByPXIxIGVsc2Ugcj1yMlxyXG5cdFx0XHRzeCA9IHggKyByICogY29zIGkqYSs5MFxyXG5cdFx0XHRzeSA9IHkgKyByICogc2luIGkqYSs5MFxyXG5cdFx0XHR2ZXJ0ZXggc3gsIHN5XHJcblx0XHRlbmRTaGFwZSBDTE9TRVxyXG5cclxuXHRkcmF3IDogPT5cclxuXHRcdG1vdmUgPSBnZXRNb3ZlIGdsb2JhbC5pbmRleC0xXHJcblx0XHRpZiBnbG9iYWwuc3VwZXJJbmRleCA9PSAwXHJcblx0XHRcdHR4dCA9IG1vdmUuc2FuXHJcblx0XHRlbHNlXHJcblx0XHRcdHR4dCA9IG1vdmUuc3VwZXJpb3JzU2FuW2dsb2JhbC5zdXBlckluZGV4LTFdXHJcblx0XHRub1N0cm9rZSgpXHJcblx0XHRmaWxsIEBiZ1xyXG5cdFx0cmVjdCBAeCxAeSxAdyxAaCowLjY1XHJcblxyXG5cdFx0aWYgQGFsaWduPT1MRUZUIHRoZW4geD1AeC0wLjQ1KkB3IGVsc2UgeD1AeFxyXG5cdFx0aWYgQHRleHQgPT0gdHh0IHRoZW4gZmlsbCAncmVkJyBlbHNlIGZpbGwgQGZnXHJcblx0XHRwdXNoKClcclxuXHRcdHRleHRTaXplIDAuNCpnbG9iYWwuU0laRVxyXG5cdFx0dGV4dEFsaWduIEBhbGlnblxyXG5cdFx0bm9TdHJva2UoKVxyXG5cdFx0dGV4dCBAdGV4dCwgeCxAeSswLjA1Kmdsb2JhbC5TSVpFXHJcblx0XHRwb3AoKVxyXG5cdFx0aWYgQGRyYXdTdGFyIHRoZW4gQHN0YXIgXCJ3aGl0ZVwiLFwiZ3JlZW5cIiwgQHgrMC41Kmdsb2JhbC5TSVpFLCBAeSwgMC4xNSpnbG9iYWwuU0laRSwgNVxyXG5cdFx0aWYgQGJhciAhPSBudWxsIHRoZW4gQGRyYXdCYXIoKVxyXG5cclxuXHRkcmF3QmFyIDogPT5cclxuXHRcdHB1c2goKVxyXG5cdFx0cmVjdE1vZGUgQ09STkVSXHJcblx0XHRub1N0cm9rZSgpXHJcblx0XHRmaWxsICdibGFjaydcclxuXHRcdHJlY3QgQHgtQHcvMixAeSswLjM1KkBoLEB3LDAuMSpAaFxyXG5cdFx0ZmlsbCAnd2hpdGUnXHJcblx0XHRyZWN0IEB4LUB3LzIsQHkrMC4zNSpAaCxAdypAYmFyLDAuMSpAaFxyXG5cdFx0cG9wKClcclxuXHJcblx0aW5zaWRlIDogKHgseSkgPT4gQHgtQHcvMiA8IHggPCBAeCtAdy8yIGFuZCBAeS1AaC8yIDwgeSA8IEB5K0BoLzJcclxuIl19
//# sourceURL=c:\github\2023-018-Python-Chess_Evaluate\coffee\button.coffee