// Generated by CoffeeScript 2.5.1
var indexOf = [].indexOf,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

export var global = {
  board: null,
  index: 0,
  SIZE: 50,
  filename: "",
  pics: {},
  moves: [],
  data: null,
  superIndex: 0,
  piecess: [],
  buttons: []
};

import {
  ass,
  log,
  range
} from '../js/utils.js';

import {
  Button
} from '../js/button.js';

export var coords = (uci) => {
  var c0, c1, r0, r1;
  c0 = "abcdefgh".indexOf(uci[0]);
  r0 = "12345678".indexOf(uci[1]);
  c1 = "abcdefgh".indexOf(uci[2]);
  r1 = "12345678".indexOf(uci[3]);
  return [c0 + 8 * r0, c1 + 8 * r1];
};

ass([8, 24], coords("a2a4"));

export var empty = (n) => {
  return (1 + Math.floor(n / 8)).toString();
};

export var makeMove = (uci, pieces) => {
  var enPassant, enPassantTrue, from, normalMove, promote, swap, to;
  swap = function(a, b, c, d) {
    return [pieces[a], pieces[b], pieces[c], pieces[d]] = [pieces[b], pieces[a], pieces[d], pieces[c]];
  };
  promote = function(uci, from, to) {
    var newPiece;
    newPiece = uci[4];
    if (indexOf.call(range(56, 63), to) >= 0) {
      newPiece = newPiece.toUpperCase();
    }
    pieces[to] = newPiece;
    return pieces[from] = empty(from);
  };
  enPassantTrue = function(from, to) { // Denna funktion skapades av CoPilot. NÃ¤stan korrekt.
    var ref, ref1, ref2;
    if ((ref = pieces[from], indexOf.call('pP', ref) >= 0) && pieces[to] === empty(to)) {
      if (pieces[from] === 'p' && pieces[to + 8] === 'P' && ((ref1 = from - to) === 7 || ref1 === 9)) {
        return true; // black takes white pawn
      }
      if (pieces[from] === 'P' && pieces[to - 8] === 'p' && ((ref2 = to - from) === 7 || ref2 === 9)) {
        return true; // white takes black pawn
      }
    }
    return false;
  };
  enPassant = function(from, to) {
    if (pieces[from] === 'p') {
      pieces[to + 8] = empty(to + 8);
    }
    if (pieces[from] === 'P') {
      pieces[to - 8] = empty(to - 8);
    }
    pieces[to] = pieces[from];
    return pieces[from] = empty(to);
  };
  normalMove = function(from, to) {
    pieces[to] = pieces[from];
    pieces[from] = empty(from);
    return pieces;
  };
  pieces = pieces.split("");
  [from, to] = coords(uci);
  if (uci === 'e1g1') {
    swap(4, 6, 5, 7); // castlings
  } else if (uci === 'e1c1') {
    swap(4, 2, 0, 3);
  } else if (uci === 'e8g8') {
    swap(60, 62, 61, 63);
  } else if (uci === 'e8c8') {
    swap(56, 59, 58, 60);
  } else if (uci.length === 5) {
    promote(uci, from, to);
  } else if (enPassantTrue(from, to)) {
    enPassant(from, to);
  } else {
    normalMove(from, to);
  }
  pieces = pieces.join("");
  return pieces;
};

ass("RNBQKBNRPPPP2PPP333333334444P4445555555566666666pppppppprnbqkbnr", makeMove('e2e4', "RNBQKBNRPPPPPPPP33333333444444445555555566666666pppppppprnbqkbnr"));

ass("R1111RK1222222223333333344444444555555556666666677777777r888k88r", makeMove('e1g1', "R111K11R222222223333333344444444555555556666666677777777r888k88r"));

ass("11KR111R222222223333333344444444555555556666666677777777r888k88r", makeMove('e1c1', "R111K11R222222223333333344444444555555556666666677777777r888k88r"));

ass("R111K11R222222223333333344444444555555556666666677777777r8888rk8", makeMove('e8g8', "R111K11R222222223333333344444444555555556666666677777777r888k88r"));

ass("R111K11R22222222333333334444444455555555666666667777777788kr888r", makeMove('e8c8', "R111K11R222222223333333344444444555555556666666677777777r888k88r"));

ass("R111K11R222222223333333344444444555555556666666677777777Q8888888", makeMove('a7a8q', "R111K11R2222222233333333444444445555555566666666P777777788888888"));

ass("1111r11122222222333333334444444455555555666666667777777788888888", makeMove('e2e1r', "111111112222p222333333334444444455555555666666667777777788888888"));

ass("11111111222222223333p3334444444455555555666666667777777788888888", makeMove('f4e3', "11111111222222223333P33344444p4455555555666666667777777788888888"));

ass('RNBQKBNR2PPPPPPP33333333P44444445555555566666666pppppppprnbqkbnr', makeMove('a2a4', "RNBQKBNRPPPPPPPP33333333444444445555555566666666pppppppprnbqkbnr"));

export var setIndex = (value) => {
  var i, j, len, move, ref, tempSAN, tempUCI;
  if (value < -1 || value > global.moves.length) {
    return;
  }
  if (value === -1) {
    return global.board.start();
  } else {
    global.index = value;
    global.buttons = [];
    global.board.pieces = global.piecess[global.index];
    if (global.index <= 0) {
      return;
    }
    move = global.moves[global.index - 1];
    global.superIndex = 0;
    if (move.superiors.length === 0) {
      tempSAN = [move.san];
      tempUCI = [move.uci];
    } else {
      tempSAN = [move.san].concat(move.superiorsSan);
      tempUCI = [move.uci].concat(move.superiors);
    }
    ref = range(min(13, tempSAN.length));
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      ((i) => {
        var button, san, uci, x, y;
        x = 9.4 * global.SIZE;
        y = 0.8 * global.SIZE * (i + 1.1);
        san = tempSAN[i];
        uci = tempUCI[i];
        button = new Button(x, y, san, () => {
          return click(i);
        });
        button.bg = ['black', 'white'][global.index % 2];
        button.fg = ['white', 'black'][global.index % 2];
        button.align = LEFT;
        return global.buttons.push(button);
      })(i);
    }
    if (global.buttons.length === 1) {
      i = 0;
    } else {
      i = 1;
    }
    return global.buttons[i].drawStar = true;
  }
};

export var click = (key) => {
  if (key === 'flip') {
    return global.board.flip();
  } else if (key === 'first') {
    return setIndex(0);
  } else if (key === 'last') {
    return setIndex(global.moves.length);
  } else if (key === 'prev') {
    return setIndex(global.index - 1);
  } else if (key === 'next') {
    return setIndex(global.index + 1);
  } else if (key === 'link') {
    return window.open(data.link, '_blank');
  } else if (key === 'up') {
    return fixSuper(-1);
  } else if (key === 'down') {
    return fixSuper(1);
  } else {
    setIndex(global.index);
    return global.board.move(key);
  }
};

export var fixSuper = (value) => {
  var uci;
  global.superIndex = modulo(global.superIndex + value, getMove(global.index - 1).superiors.length + 1);
  if (global.superIndex === 0) {
    uci = getMove(global.index - 1).uci;
  } else {
    uci = getMove(global.index - 1).superiors[global.superIndex - 1];
  }
  return global.board.pieces = makeMove(uci, global.piecess[global.index - 1]);
};

export var getMove = (index) => {
  if (index === -1) {
    return {
      score: '',
      uci: '',
      san: '',
      superiors: [],
      superiorsSan: []
    };
  } else {
    return global.moves[index];
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnbG9iYWxzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQTs7O0FBQUEsT0FBQSxJQUFPLE1BQUEsR0FBUztFQUNmLEtBQUEsRUFBTSxJQURTO0VBRWYsS0FBQSxFQUFNLENBRlM7RUFHZixJQUFBLEVBQUssRUFIVTtFQUlmLFFBQUEsRUFBUyxFQUpNO0VBS2YsSUFBQSxFQUFLLENBQUEsQ0FMVTtFQU1mLEtBQUEsRUFBTSxFQU5TO0VBT2YsSUFBQSxFQUFLLElBUFU7RUFRZixVQUFBLEVBQVcsQ0FSSTtFQVNmLE9BQUEsRUFBUSxFQVRPO0VBVWYsT0FBQSxFQUFRO0FBVk87O0FBYWhCLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUVBLE9BQUEsSUFBTyxNQUFBLEdBQVMsQ0FBQyxHQUFELENBQUEsR0FBQTtBQUNoQixNQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBO0VBQUMsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO0VBQ0wsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO0VBQ0wsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO0VBQ0wsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO1NBQ0wsQ0FBQyxFQUFBLEdBQUcsQ0FBQSxHQUFFLEVBQU4sRUFBVSxFQUFBLEdBQUcsQ0FBQSxHQUFFLEVBQWY7QUFMZTs7QUFNaEIsR0FBQSxDQUFJLENBQUMsQ0FBRCxFQUFHLEVBQUgsQ0FBSixFQUFZLE1BQUEsQ0FBTyxNQUFQLENBQVo7O0FBRUEsT0FB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R0FBVyxDQUFDLEtBQUQsQ0FBQSxHQUFBO0FBQ2xCLE1BQUE7RUFBQyxNQUFNLENBQUMsVUFBUCxVQUFxQixNQUFNLENBQUMsVUFBUCxHQUFrQixPQUFXLE9BQUEsQ0FBUSxNQUFNLENBQUMsS0FBUCxHQUFhLENBQXJCLENBQXVCLENBQUMsU0FBUyxDQUFDLE1BQWxDLEdBQXlDO0VBQzNGLElBQUcsTUFBTSxDQUFDLFVBQVAsS0FBcUIsQ0FBeEI7SUFBK0IsR0FBQSxHQUFNLE9BQUEsQ0FBUSxNQUFNLENBQUMsS0FBUCxHQUFhLENBQXJCLENBQXVCLENBQUMsSUFBN0Q7R0FBQSxNQUFBO0lBQ0ssR0FBQSxHQUFNLE9BQUEsQ0FBUSxNQUFNLENBQUMsS0FBUCxHQUFhLENBQXJCLENBQXVCLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFQLEdBQWtCLENBQW5CLEVBRDVDOztTQUVBLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBYixHQUFzQixRQUFBLENBQVMsR0FBVCxFQUFhLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQVAsR0FBYSxDQUFkLENBQTNCO0FBSkw7O0FBTWxCLE9BQUEsSUFBTyxPQUFBLEdBQVUsQ0FBQyxLQUFELENBQUEsR0FBQTtFQUNoQixJQUFHLEtBQUEsS0FBTyxDQUFDLENBQVg7V0FDQztNQUFDLEtBQUEsRUFBTSxFQUFQO01BQVcsR0FBQSxFQUFJLEVBQWY7TUFBbUIsR0FBQSxFQUFJLEVBQXZCO01BQTJCLFNBQUEsRUFBVSxFQUFyQztNQUF5QyxZQUFBLEVBQWE7SUFBdEQsRUFERDtHQUFBLE1BQUE7V0FHQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUQsRUFIYjs7QUFEZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZ2xvYmFsID0ge1xyXG5cdGJvYXJkOm51bGwsXHJcblx0aW5kZXg6MCxcclxuXHRTSVpFOjUwLFxyXG5cdGZpbGVuYW1lOlwiXCIsXHJcblx0cGljczp7fSxcclxuXHRtb3ZlczpbXSxcclxuXHRkYXRhOm51bGwsXHJcblx0c3VwZXJJbmRleDowLFxyXG5cdHBpZWNlc3M6W10sXHJcblx0YnV0dG9uczpbXVxyXG59XHJcblxyXG5pbXBvcnQge2Fzcyxsb2cscmFuZ2V9IGZyb20gJy4uL2pzL3V0aWxzLmpzJ1xyXG5pbXBvcnQge0J1dHRvbn0gZnJvbSAnLi4vanMvYnV0dG9uLmpzJ1xyXG5cclxuZXhwb3J0IGNvb3JkcyA9ICh1Y2kpID0+XHJcblx0YzAgPSBcImFiY2RlZmdoXCIuaW5kZXhPZiB1Y2lbMF1cclxuXHRyMCA9IFwiMTIzNDU2NzhcIi5pbmRleE9mIHVjaVsxXVxyXG5cdGMxID0gXCJhYmNkZWZnaFwiLmluZGV4T2YgdWNpWzJdXHJcblx0cjEgPSBcIjEyMzQ1Njc4XCIuaW5kZXhPZiB1Y2lbM11cclxuXHRbYzArOCpyMCwgYzErOCpyMV1cclxuYXNzIFs4LDI0XSwgY29vcmRzIFwiYTJhNFwiXHJcblxyXG5leHBvcnQgZW1wdHkgPSAobikgPT4gKDErbi8vOCkudG9TdHJpbmcoKVxyXG5cclxuZXhwb3J0IG1ha2VNb3ZlID0gKHVjaSxwaWVjZXMpID0+XHJcblxyXG5cdHN3YXAgPSAoYSxiLGMsZCkgLT5cclxuXHRcdFtwaWVjZXNbYV0scGllY2VzW2JdLHBpZWNlc1tjXSxwaWVjZXNbZF1dID0gW3BpZWNlc1tiXSxwaWVjZXNbYV0scGllY2VzW2RdLHBpZWNlc1tjXV1cclxuXHJcblx0cHJvbW90ZSA9ICh1Y2ksZnJvbSx0bykgLT5cclxuXHRcdG5ld1BpZWNlID0gdWNpWzRdXHJcblx0XHRpZiB0byBpbiByYW5nZSA1Niw2MyB0aGVuIG5ld1BpZWNlID0gbmV3UGllY2UudG9VcHBlckNhc2UoKVxyXG5cdFx0cGllY2VzW3RvXSA9IG5ld1BpZWNlXHJcblx0XHRwaWVjZXNbZnJvbV0gPSBlbXB0eSBmcm9tXHJcblxyXG5cdGVuUGFzc2FudFRydWUgPSAoZnJvbSx0bykgLT4gIyBEZW5uYSBmdW5rdGlvbiBza2FwYWRlcyBhdiBDb1BpbG90LiBOw6RzdGFuIGtvcnJla3QuXHJcblx0XHRpZiBwaWVjZXNbZnJvbV0gaW4gJ3BQJyBhbmQgcGllY2VzW3RvXSA9PSBlbXB0eSB0b1xyXG5cdFx0XHRpZiBwaWVjZXNbZnJvbV0gPT0gJ3AnIGFuZCBwaWVjZXNbdG8rOF09PSdQJyBhbmQgZnJvbSAtIHRvIGluIFs3LDldIHRoZW4gcmV0dXJuIHRydWUgIyBibGFjayB0YWtlcyB3aGl0ZSBwYXduXHJcblx0XHRcdGlmIHBpZWNlc1tmcm9tXSA9PSAnUCcgYW5kIHBpZWNlc1t0by04XT09J3AnIGFuZCB0byAtIGZyb20gaW4gWzcsOV0gdGhlbiByZXR1cm4gdHJ1ZSAjIHdoaXRlIHRha2VzIGJsYWNrIHBhd25cclxuXHRcdHJldHVybiBmYWxzZVxyXG5cclxuXHRlblBhc3NhbnQgPSAoZnJvbSx0bykgLT5cclxuXHRcdGlmIHBpZWNlc1tmcm9tXSA9PSAncCcgdGhlbiBwaWVjZXNbdG8rOF0gPSBlbXB0eSB0bys4XHJcblx0XHRpZiBwaWVjZXNbZnJvbV0gPT0gJ1AnIHRoZW4gcGllY2VzW3RvLThdID0gZW1wdHkgdG8tOFxyXG5cdFx0cGllY2VzW3RvXSA9IHBpZWNlc1tmcm9tXVxyXG5cdFx0cGllY2VzW2Zyb21dID0gZW1wdHkgdG9cclxuXHJcblx0bm9ybWFsTW92ZSA9IChmcm9tLHRvKSAtPlxyXG5cdFx0cGllY2VzW3RvXSA9IHBpZWNlc1tmcm9tXVxyXG5cdFx0cGllY2VzW2Zyb21dID0gZW1wdHkgZnJvbSBcclxuXHRcdHBpZWNlc1xyXG5cclxuXHRwaWVjZXMgPSBwaWVjZXMuc3BsaXQgXCJcIlxyXG5cclxuXHRbZnJvbSx0b10gPSBjb29yZHMgdWNpXHJcblx0aWYgdWNpPT0nZTFnMScgdGhlbiBzd2FwIDQsNiw1LDcgIyBjYXN0bGluZ3NcclxuXHRlbHNlIGlmIHVjaT09J2UxYzEnIHRoZW4gc3dhcCA0LDIsMCwzXHJcblx0ZWxzZSBpZiB1Y2k9PSdlOGc4JyB0aGVuIHN3YXAgNjAsNjIsNjEsNjNcclxuXHRlbHNlIGlmIHVjaT09J2U4YzgnIHRoZW4gc3dhcCA1Niw1OSw1OCw2MFxyXG5cdGVsc2UgaWYgdWNpLmxlbmd0aCA9PSA1IHRoZW4gcHJvbW90ZSB1Y2ksZnJvbSx0b1xyXG5cdGVsc2UgaWYgZW5QYXNzYW50VHJ1ZSBmcm9tLHRvIHRoZW4gZW5QYXNzYW50IGZyb20sdG9cclxuXHRlbHNlIG5vcm1hbE1vdmUgZnJvbSx0b1xyXG5cdHBpZWNlcyA9IHBpZWNlcy5qb2luIFwiXCJcclxuXHRwaWVjZXNcclxuXHJcbmFzcyBcIlJOQlFLQk5SUFBQUDJQUFAzMzMzMzMzMzQ0NDRQNDQ0NTU1NTU1NTU2NjY2NjY2NnBwcHBwcHBwcm5icWtibnJcIiwgbWFrZU1vdmUgJ2UyZTQnLCBcIlJOQlFLQk5SUFBQUFBQUFAzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2NnBwcHBwcHBwcm5icWtibnJcIlxyXG5hc3MgXCJSMTExMVJLMTIyMjIyMjIyMzMzMzMzMzM0NDQ0NDQ0NDU1NTU1NTU1NjY2NjY2NjY3Nzc3Nzc3N3I4ODhrODhyXCIsIG1ha2VNb3ZlICdlMWcxJywgXCJSMTExSzExUjIyMjIyMjIyMzMzMzMzMzM0NDQ0NDQ0NDU1NTU1NTU1NjY2NjY2NjY3Nzc3Nzc3N3I4ODhrODhyXCJcclxuYXNzIFwiMTFLUjExMVIyMjIyMjIyMjMzMzMzMzMzNDQ0NDQ0NDQ1NTU1NTU1NTY2NjY2NjY2Nzc3Nzc3NzdyODg4azg4clwiLCBtYWtlTW92ZSAnZTFjMScsIFwiUjExMUsxMVIyMjIyMjIyMjMzMzMzMzMzNDQ0NDQ0NDQ1NTU1NTU1NTY2NjY2NjY2Nzc3Nzc3NzdyODg4azg4clwiXHJcbmFzcyBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4ODhyazhcIiwgbWFrZU1vdmUgJ2U4ZzgnLCBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4OGs4OHJcIlxyXG5hc3MgXCJSMTExSzExUjIyMjIyMjIyMzMzMzMzMzM0NDQ0NDQ0NDU1NTU1NTU1NjY2NjY2NjY3Nzc3Nzc3Nzg4a3I4ODhyXCIsIG1ha2VNb3ZlICdlOGM4JywgXCJSMTExSzExUjIyMjIyMjIyMzMzMzMzMzM0NDQ0NDQ0NDU1NTU1NTU1NjY2NjY2NjY3Nzc3Nzc3N3I4ODhrODhyXCJcclxuYXNzIFwiUjExMUsxMVIyMjIyMjIyMjMzMzMzMzMzNDQ0NDQ0NDQ1NTU1NTU1NTY2NjY2NjY2Nzc3Nzc3NzdRODg4ODg4OFwiLCBtYWtlTW92ZSAnYTdhOHEnLFwiUjExMUsxMVIyMjIyMjIyMjMzMzMzMzMzNDQ0NDQ0NDQ1NTU1NTU1NTY2NjY2NjY2UDc3Nzc3Nzc4ODg4ODg4OFwiXHJcbmFzcyBcIjExMTFyMTExMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3ODg4ODg4ODhcIiwgbWFrZU1vdmUgJ2UyZTFyJyxcIjExMTExMTExMjIyMnAyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3ODg4ODg4ODhcIlxyXG5hc3MgXCIxMTExMTExMTIyMjIyMjIyMzMzM3AzMzM0NDQ0NDQ0NDU1NTU1NTU1NjY2NjY2NjY3Nzc3Nzc3Nzg4ODg4ODg4XCIsIG1ha2VNb3ZlICdmNGUzJywgXCIxMTExMTExMTIyMjIyMjIyMzMzM1AzMzM0NDQ0NHA0NDU1NTU1NTU1NjY2NjY2NjY3Nzc3Nzc3Nzg4ODg4ODg4XCJcclxuYXNzICdSTkJRS0JOUjJQUFBQUFBQMzMzMzMzMzNQNDQ0NDQ0NDU1NTU1NTU1NjY2NjY2NjZwcHBwcHBwcHJuYnFrYm5yJywgbWFrZU1vdmUgJ2EyYTQnLCBcIlJOQlFLQk5SUFBQUFBQUFAzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2NnBwcHBwcHBwcm5icWtibnJcIlxyXG5cclxuZXhwb3J0IHNldEluZGV4ID0odmFsdWUpID0+XHJcblx0aWYgdmFsdWUgPCAtMSBvciB2YWx1ZSA+IGdsb2JhbC5tb3Zlcy5sZW5ndGggdGhlbiByZXR1cm5cclxuXHRpZiB2YWx1ZSA9PSAtMSB0aGVuIGdsb2JhbC5ib2FyZC5zdGFydCgpXHJcblx0ZWxzZVxyXG5cdFx0Z2xvYmFsLmluZGV4ID0gdmFsdWVcclxuXHRcdGdsb2JhbC5idXR0b25zID0gW11cclxuXHRcdGdsb2JhbC5ib2FyZC5waWVjZXMgPSBnbG9iYWwucGllY2Vzc1tnbG9iYWwuaW5kZXhdXHJcblx0XHRpZiBnbG9iYWwuaW5kZXg8PTAgdGhlbiByZXR1cm4gXHJcblx0XHRtb3ZlID0gZ2xvYmFsLm1vdmVzW2dsb2JhbC5pbmRleC0xXVxyXG5cdFx0Z2xvYmFsLnN1cGVySW5kZXggPSAwXHJcblx0XHRpZiBtb3ZlLnN1cGVyaW9ycy5sZW5ndGggPT0gMFxyXG5cdFx0XHR0ZW1wU0FOID0gW21vdmUuc2FuXVxyXG5cdFx0XHR0ZW1wVUNJID0gW21vdmUudWNpXVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0ZW1wU0FOID0gW21vdmUuc2FuXS5jb25jYXQgbW92ZS5zdXBlcmlvcnNTYW5cclxuXHRcdFx0dGVtcFVDSSA9IFttb3ZlLnVjaV0uY29uY2F0IG1vdmUuc3VwZXJpb3JzXHJcblxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgbWluIDEzLCB0ZW1wU0FOLmxlbmd0aFxyXG5cdFx0XHRkbyAoaSkgPT5cclxuXHRcdFx0XHR4ID0gOS40Kmdsb2JhbC5TSVpFXHJcblx0XHRcdFx0eSA9IDAuOCpnbG9iYWwuU0laRSooaSsxLjEpXHJcblx0XHRcdFx0c2FuID0gdGVtcFNBTltpXVxyXG5cdFx0XHRcdHVjaSA9IHRlbXBVQ0lbaV1cclxuXHRcdFx0XHRidXR0b24gPSBuZXcgQnV0dG9uIHgseSwgc2FuLCAoKSA9PiBjbGljayBpXHJcblx0XHRcdFx0YnV0dG9uLmJnID0gWydibGFjaycsJ3doaXRlJ11bZ2xvYmFsLmluZGV4JTJdXHJcblx0XHRcdFx0YnV0dG9uLmZnID0gWyd3aGl0ZScsJ2JsYWNrJ11bZ2xvYmFsLmluZGV4JTJdXHJcblx0XHRcdFx0YnV0dG9uLmFsaWduID0gTEVGVFxyXG5cdFx0XHRcdGdsb2JhbC5idXR0b25zLnB1c2ggYnV0dG9uXHJcblx0XHRpZiBnbG9iYWwuYnV0dG9ucy5sZW5ndGggPT0gMSB0aGVuIGkgPSAwIGVsc2UgaSA9IDFcclxuXHRcdGdsb2JhbC5idXR0b25zW2ldLmRyYXdTdGFyID0gdHJ1ZVxyXG5cclxuZXhwb3J0IGNsaWNrID0gKGtleSkgPT5cclxuXHRpZiBrZXkgPT0gJ2ZsaXAnIHRoZW4gZ2xvYmFsLmJvYXJkLmZsaXAoKVxyXG5cdGVsc2UgaWYga2V5ID09ICdmaXJzdCcgdGhlbiBzZXRJbmRleCAwXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ2xhc3QnIHRoZW4gc2V0SW5kZXggZ2xvYmFsLm1vdmVzLmxlbmd0aFxyXG5cdGVsc2UgaWYga2V5ID09ICdwcmV2JyB0aGVuIHNldEluZGV4IGdsb2JhbC5pbmRleC0xXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ25leHQnIHRoZW4gc2V0SW5kZXggZ2xvYmFsLmluZGV4KzFcclxuXHRlbHNlIGlmIGtleSA9PSAnbGluaycgdGhlbiB3aW5kb3cub3BlbiBkYXRhLmxpbmssICdfYmxhbmsnXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ3VwJyAgIHRoZW4gZml4U3VwZXIgLTFcclxuXHRlbHNlIGlmIGtleSA9PSAnZG93bicgdGhlbiBmaXhTdXBlciAxXHJcblx0ZWxzZVxyXG5cdFx0c2V0SW5kZXggZ2xvYmFsLmluZGV4XHJcblx0XHRnbG9iYWwuYm9hcmQubW92ZSBrZXlcclxuXHJcbmV4cG9ydCBmaXhTdXBlciA9ICh2YWx1ZSkgPT5cclxuXHRnbG9iYWwuc3VwZXJJbmRleCA9IChnbG9iYWwuc3VwZXJJbmRleCt2YWx1ZSkgJSUgKGdldE1vdmUoZ2xvYmFsLmluZGV4LTEpLnN1cGVyaW9ycy5sZW5ndGgrMSlcclxuXHRpZiBnbG9iYWwuc3VwZXJJbmRleCA9PSAwIHRoZW4gdWNpID0gZ2V0TW92ZShnbG9iYWwuaW5kZXgtMSkudWNpXHJcblx0ZWxzZSB1Y2kgPSBnZXRNb3ZlKGdsb2JhbC5pbmRleC0xKS5zdXBlcmlvcnNbZ2xvYmFsLnN1cGVySW5kZXgtMV1cclxuXHRnbG9iYWwuYm9hcmQucGllY2VzID0gbWFrZU1vdmUgdWNpLGdsb2JhbC5waWVjZXNzW2dsb2JhbC5pbmRleC0xXVxyXG5cclxuZXhwb3J0IGdldE1vdmUgPSAoaW5kZXgpID0+XHJcblx0aWYgaW5kZXg9PS0xXHJcblx0XHR7c2NvcmU6JycsIHVjaTonJywgc2FuOicnLCBzdXBlcmlvcnM6W10sIHN1cGVyaW9yc1NhbjpbXX1cclxuXHRlbHNlXHJcblx0XHRnbG9iYWwubW92ZXNbaW5kZXhdXHJcbiJdfQ==
//# sourceURL=c:\github\2023-018-Python-Chess_Evaluate\coffee\globals.coffee