// Generated by CoffeeScript 2.5.1
var SIZE, released, xdraw;

import _ from 'https://cdn.skypack.dev/lodash';

import {
  ass,
  log,
  range
} from '../js/utils.js';

import {
  Board
} from '../js/board.js';

import {
  Button
} from '../js/button.js';

import {
  Square
} from '../js/square.js';

import {
  makeMove,
  setIndex,
  click,
  fixSuper,
  global,
  loadGame
} from '../js/globals.js';

SIZE = global.SIZE;

released = true; // used in mousePressed/mouseReleased

window.preload = () => {
  var i, j, len, len1, letter, ref, ref1, results;
  global.partier = loadJSON('./data/partier.json'); // , init
  ref = "rnbqkp";
  for (i = 0, len = ref.length; i < len; i++) {
    letter = ref[i];
    global.pics[letter] = loadImage('./images/b' + letter + '.png');
  }
  ref1 = "RNBQKP";
  results = [];
  for (j = 0, len1 = ref1.length; j < len1; j++) {
    letter = ref1[j];
    results.push(global.pics[letter] = loadImage('./images/w' + letter.toLowerCase() + '.png'));
  }
  return results;
};

window.setup = () => {
  createCanvas(SIZE * 10.3, SIZE * 11);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  global.board = new Board();
  loadGame(0);
  return xdraw();
};

xdraw = () => {
  var button, i, len, ref, results;
  background('gray');
  textSize(SIZE);
  global.board.draw();
  ref = global.buttons;
  results = [];
  for (i = 0, len = ref.length; i < len; i++) {
    button = ref[i];
    results.push(button.draw());
  }
  return results;
};

window.keyPressed = () => {
  if (key === 'ArrowRight') {
    click('next');
  }
  if (key === 'ArrowLeft') {
    click('prev');
  }
  if (key === 'ArrowUp') {
    click('up');
  }
  if (key === 'ArrowDown') {
    click('down');
  }
  if (key === ' ') {
    click('flip');
  }
  if (key === 'Home') {
    click('first');
  }
  if (key === 'End') {
    click('last');
  }
  if (key === 'PageUp') {
    click('pgup');
  }
  if (key === 'PageDown') {
    click('pgdn');
  }
  xdraw();
  return false;
};

window.mousePressed = () => {
  var button, i, len, ref;
  if (!released) {
    return;
  }
  released = false;
  ref = global.buttons.concat(global.board.buttons);
  for (i = 0, len = ref.length; i < len; i++) {
    button = ref[i];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      xdraw();
      return false;
    }
  }
  return false;
};

window.mouseReleased = () => {
  released = true;
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLFFBQUEsRUFBQTs7QUFBQSxPQUFPLENBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVEsR0FBUjtFQUFZLEdBQVo7RUFBZ0IsS0FBaEI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxLQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsTUFBUjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxRQUFSO0VBQWlCLFFBQWpCO0VBQTBCLEtBQTFCO0VBQWdDLFFBQWhDO0VBQXlDLE1BQXpDO0VBQWdELFFBQWhEO0NBQUEsTUFBQTs7QUFFQSxJQUFBLEdBQU8sTUFBTSxDQUFDOztBQUNkLFFBQUEsR0FBVyxLQVJYOztBQVVBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLENBQUEsQ0FBQSxHQUFBO0FBQ2pCLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBO0VBQUMsTUFBTSxDQUFDLE9BQVAsR0FBaUIsUUFBQSxDQUFTLHFCQUFULEVBQWxCO0FBQ0M7RUFBQSxLQUFBLHFDQUFBOztJQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBRCxDQUFYLEdBQXNCLFNBQUEsQ0FBVSxZQUFBLEdBQWUsTUFBZixHQUF3QixNQUFsQztFQUR2QjtBQUVBO0FBQUE7RUFBQSxLQUFBLHdDQUFBOztpQkFDQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQUQsQ0FBWCxHQUFzQixTQUFBLENBQVUsWUFBQSxHQUFlLE1BQU0sQ0FBQyxXQUFQLENBQUEsQ0FBZixHQUFzQyxNQUFoRDtFQUR2QixDQUFBOztBQUpnQjs7QUFPakIsTUFBTSxDQUFDLEtBQVAsR0FBZSxDQUFBLENBQUEsR0FBQTtFQUNkLFlBQUEsQ0FBYSxJQUFBLEdBQUssSUFBbEIsRUFBd0IsSUFBQSxHQUFLLEVBQTdCO0VBRUEsU0FBQSxDQUFVLE1BQVYsRUFBaUIsTUFBakI7RUFDQSxRQUFBLENBQVMsTUFBVDtFQUVBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsSUFBSSxLQUFKLENBQUE7RUFDZixRQUFBLENBQVMsQ0FBVDtTQUVBLEtBQUEsQ0FBQTtBQVRjOztBQVdmLEtBQUEsR0FBUSxDQUFBLENBQUEsR0FBQTtBQUNSLE1BQUEsTUFBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0VBQUMsVUFBQSxDQUFXLE1BQVg7RUFDQSxRQUFBLENBQVMsSUFBVDtFQUNBLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBYixDQUFBO0FBQ0E7QUFBQTtFQUFBLEtBQUEscUNBQUE7O2lCQUNDLE1BQU0sQ0FBQyxJQUFQLENBQUE7RUFERCxDQUFBOztBQUpPOztBQU9SLE1BQU0sQ0FBQyxVQUFQLEdBQW9CLENBQUEsQ0FBQSxHQUFBO0VBQ25CLElBQUcsR0FBQSxLQUFPLFlBQVY7SUFBNkIsS0FBQSxDQUFNLE1BQU4sRUFBN0I7O0VBQ0EsSUFBRyxHQUFBLEtBQU8sV0FBVjtJQUEyQixLQUFBLENBQU0sTUFBTixFQUEzQjs7RUFDQSxJQUFHLEdBQUEsS0FBTyxTQUFWO0lBQTBCLEtBQUEsQ0FBTSxJQUFOLEVBQTFCOztFQUNBLElBQUcsR0FBQSxLQUFPLFdBQVY7SUFBMkIsS0FBQSxDQUFNLE1BQU4sRUFBM0I7O0VBQ0EsSUFBRyxHQUFBLEtBQU8sR0FBVjtJQUFtQixLQUFBLENBQU0sTUFBTixFQUFuQjs7RUFDQSxJQUFHLEdBQUEsS0FBTyxNQUFWO0lBQXNCLEtBQUEsQ0FBTSxPQUFOLEVBQXRCOztFQUNBLElBQUcsR0FBQSxLQUFPLEtBQVY7SUFBcUIsS0FBQSxDQUFNLE1BQU4sRUFBckI7O0VBQ0EsSUFBRyxHQUFBLEtBQU8sUUFBVjtJQUF3QixLQUFBLENBQU0sTUFBTixFQUF4Qjs7RUFDQSxJQUFHLEdBQUEsS0FBTyxVQUFWO0lBQTBCLEtBQUEsQ0FBTSxNQUFOLEVBQTFCOztFQUNBLEtBQUEsQ0FBQTtBQUNBLFNBQU87QUFYWTs7QUFhcEIsTUFBTSxDQUFDLFlBQVAsR0FBc0IsQ0FBQSxDQUFBLEdBQUE7QUFDdEIsTUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQTtFQUFDLElBQUcsQ0FBSSxRQUFQO0FBQXFCLFdBQXJCOztFQUNBLFFBQUEsR0FBVTtBQUNWO0VBQUEsS0FBQSxxQ0FBQTs7SUFDQyxJQUFHLE1BQU0sQ0FBQyxNQUFQLENBQWMsTUFBZCxFQUFxQixNQUFyQixDQUFIO01BQ0MsTUFBTSxDQUFDLE9BQVAsQ0FBQTtNQUNBLEtBQUEsQ0FBQTtBQUNBLGFBQU8sTUFIUjs7RUFERDtTQUtBO0FBUnFCOztBQVV0QixNQUFNLENBQUMsYUFBUCxHQUF1QixDQUFBLENBQUEsR0FBQTtFQUN0QixRQUFBLEdBQVc7U0FDWDtBQUZzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfICAgICAgICAgICBmcm9tICdodHRwczovL2Nkbi5za3lwYWNrLmRldi9sb2Rhc2gnXHJcbmltcG9ydCB7YXNzLGxvZyxyYW5nZX0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcbmltcG9ydCB7Qm9hcmR9IGZyb20gJy4uL2pzL2JvYXJkLmpzJ1xyXG5pbXBvcnQge0J1dHRvbn0gZnJvbSAnLi4vanMvYnV0dG9uLmpzJ1xyXG5pbXBvcnQge1NxdWFyZX0gZnJvbSAnLi4vanMvc3F1YXJlLmpzJ1xyXG5pbXBvcnQge21ha2VNb3ZlLHNldEluZGV4LGNsaWNrLGZpeFN1cGVyLGdsb2JhbCxsb2FkR2FtZX0gZnJvbSAnLi4vanMvZ2xvYmFscy5qcydcclxuXHJcblNJWkUgPSBnbG9iYWwuU0laRVxyXG5yZWxlYXNlZCA9IHRydWUgIyB1c2VkIGluIG1vdXNlUHJlc3NlZC9tb3VzZVJlbGVhc2VkXHJcblxyXG53aW5kb3cucHJlbG9hZCA9ID0+XHJcblx0Z2xvYmFsLnBhcnRpZXIgPSBsb2FkSlNPTiAnLi9kYXRhL3BhcnRpZXIuanNvbicgIyAsIGluaXRcclxuXHRmb3IgbGV0dGVyIGluIFwicm5icWtwXCJcclxuXHRcdGdsb2JhbC5waWNzW2xldHRlcl0gPSBsb2FkSW1hZ2UgJy4vaW1hZ2VzL2InICsgbGV0dGVyICsgJy5wbmcnXHJcblx0Zm9yIGxldHRlciBpbiBcIlJOQlFLUFwiXHJcblx0XHRnbG9iYWwucGljc1tsZXR0ZXJdID0gbG9hZEltYWdlICcuL2ltYWdlcy93JyArIGxldHRlci50b0xvd2VyQ2FzZSgpICsgJy5wbmcnXHJcblxyXG53aW5kb3cuc2V0dXAgPSA9PlxyXG5cdGNyZWF0ZUNhbnZhcyBTSVpFKjEwLjMsIFNJWkUqMTFcclxuXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRyZWN0TW9kZSBDRU5URVJcclxuXHJcblx0Z2xvYmFsLmJvYXJkID0gbmV3IEJvYXJkKClcclxuXHRsb2FkR2FtZSAwXHJcblxyXG5cdHhkcmF3KClcclxuXHJcbnhkcmF3ID0gPT5cclxuXHRiYWNrZ3JvdW5kICdncmF5J1xyXG5cdHRleHRTaXplIFNJWkVcclxuXHRnbG9iYWwuYm9hcmQuZHJhdygpXHJcblx0Zm9yIGJ1dHRvbiBpbiBnbG9iYWwuYnV0dG9uc1xyXG5cdFx0YnV0dG9uLmRyYXcoKVxyXG5cclxud2luZG93LmtleVByZXNzZWQgPSA9PlxyXG5cdGlmIGtleSA9PSAnQXJyb3dSaWdodCcgIHRoZW4gY2xpY2sgJ25leHQnXHJcblx0aWYga2V5ID09ICdBcnJvd0xlZnQnIHRoZW4gY2xpY2sgJ3ByZXYnXHJcblx0aWYga2V5ID09ICdBcnJvd1VwJyAgdGhlbiBjbGljayAndXAnXHJcblx0aWYga2V5ID09ICdBcnJvd0Rvd24nIHRoZW4gY2xpY2sgJ2Rvd24nXHJcblx0aWYga2V5ID09ICcgJyB0aGVuIGNsaWNrICdmbGlwJ1xyXG5cdGlmIGtleSA9PSAnSG9tZScgdGhlbiBjbGljayAnZmlyc3QnXHJcblx0aWYga2V5ID09ICdFbmQnIHRoZW4gY2xpY2sgJ2xhc3QnXHJcblx0aWYga2V5ID09ICdQYWdlVXAnIHRoZW4gY2xpY2sgJ3BndXAnXHJcblx0aWYga2V5ID09ICdQYWdlRG93bicgdGhlbiBjbGljayAncGdkbidcclxuXHR4ZHJhdygpXHJcblx0cmV0dXJuIGZhbHNlXHJcblxyXG53aW5kb3cubW91c2VQcmVzc2VkID0gPT5cclxuXHRpZiBub3QgcmVsZWFzZWQgdGhlbiByZXR1cm5cclxuXHRyZWxlYXNlZCA9ZmFsc2VcclxuXHRmb3IgYnV0dG9uIGluIGdsb2JhbC5idXR0b25zLmNvbmNhdCBnbG9iYWwuYm9hcmQuYnV0dG9uc1xyXG5cdFx0aWYgYnV0dG9uLmluc2lkZSBtb3VzZVgsbW91c2VZXHJcblx0XHRcdGJ1dHRvbi5vbmNsaWNrKClcclxuXHRcdFx0eGRyYXcoKVxyXG5cdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRmYWxzZVxyXG5cclxud2luZG93Lm1vdXNlUmVsZWFzZWQgPSA9PlxyXG5cdHJlbGVhc2VkID0gdHJ1ZVxyXG5cdGZhbHNlIl19
//# sourceURL=c:\github\2023-018-Python-Chess_Evaluate\coffee\sketch.coffee